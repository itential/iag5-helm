# Default values for iag5.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

hostname: iag5.example.com
useTLS: false
etcdUseTLS: false
port: 50051

image:
  repository: "497639811223.dkr.ecr.us-east-2.amazonaws.com/automation-gateway5"
  tag: "5.1.1-amd64"
  pullPolicy: "IfNotPresent"

imagePullSecrets:
  - name: ""

podAnnotations: {}
podLabels: {}
podSecurityContext: {}
securityContext: {}

service:
  type: "LoadBalancer"
  name: "iag5-service"
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
    service.beta.kubernetes.io/aws-load-balancer-internal: "false"
    service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "TCP"
    external-dns.alpha.kubernetes.io/hostname: iag5.example.com
    external-dns.alpha.kubernetes.io/ttl: "60"

issuer:
  kind: Issuer
  enabled: true
  name: iag5-ca-issuer
  caSecretName: itential-ca

certificate:
  enabled: true
  issuerRef:
    name: iag5-ca-issuer
    kind: Issuer
  renewBefore: 48h
  duration: 2160h
  ipAddress: []
  includeServiceIPs: true
  dnsNames:
    - iag5.example.com
  privateKey: {}
  keyStores: {}
  subject:
    organizations:
      - "Itential"
    countries:
      - "US"
    localities:
      - "Atlanta"
    provinces:
      - "Georgia"
    streetAddresses:
      - "1350 Spring St NW"
    postalCodes:
      - "30309"

resources:
  enabled: true
  runners:
    limits:
      cpu: "4"
      memory: "8Gi"
    requests:
      cpu: "1000m"
      memory: "256Mi"
  servers:
    limits:
      cpu: "1"
      memory: "2Gi"
    requests:
      cpu: "1000m"
      memory: "256Mi"

livenessProbe:
  enabled: true
  settings:
    exec:
      command:
        - /bin/sh
        - -c
        - pgrep iagctl > /dev/null
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

readinessProbe:
  enabled: true
  settings:
    exec:
      command:
        - /bin/sh
        - -c
        - pgrep iagctl > /dev/null
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 2
    successThreshold: 1
    failureThreshold: 3

runnerSettings:
  replicaCount: 3
  env: {}

serverSettings:
  replicaCount: 2
  connectEnabled: true
  connectHosts: "test.example.com:8080"
  connectInsecureEnabled: false
  env: {}

applicationSettings:
  etcdTlsSecretName: etcd-tls-secret
  clusterId: cluster_1
  logLevel: DEBUG
  storeBackend: etcd # "etcd", "memory", "dynamodb"

  # Etcd settings
  etcdUseTLS: false
  etcdUseClientCertAuth: false
  etcdHosts: "etcd.default.svc.cluster.local:2379"

  # DynamoDB settings
  dynamodbTableName: "test-table-name"

  # Any other environment variables can be passed through
  env: {}

volumes: []

volumeMounts: []

nodeSelector: {}

tolerations: []

affinity: {}
